import{r as f,j as e,K as h,i as w,e as C,S as D,B,U as E}from"./index-BDgzWWmh.js";import{u as H}from"./useQuery-vcM0ZZVl.js";import{I as K}from"./input-CPbQ8X6K.js";import{B as N}from"./Badge-B40-rsCM.js";import{T as M,a as q,b as y,c as x,d as O,e as m}from"./table-DKywhTXv.js";import{C as l,a as n,b as c,c as i,d as v}from"./Card-DsKWwR8B.js";import{u as U}from"./userManagementApi-BXc6xbO-.js";import{D as S}from"./database-BRXFgz4j.js";import{F as Q}from"./file-text-CklGLT4Q.js";import"./api-BjH6yXU-.js";const V={Users:E,Roles:C,Permissions:h,Analytics:B,Reports:Q,Recommendations:S,System:w},W={Read:"bg-blue-100 text-blue-800",Write:"bg-green-100 text-green-800",Delete:"bg-red-100 text-red-800",Admin:"bg-purple-100 text-purple-800"};function se(){const[o,P]=f.useState(""),[j,R]=f.useState(""),[u,A]=f.useState(""),{data:d=[],isLoading:T,error:F}=H({queryKey:["permissions"],queryFn:U.getPermissions}),L=d.filter(s=>{var b;const r=s.name.toLowerCase().includes(o.toLowerCase())||((b=s.description)==null?void 0:b.toLowerCase().includes(o.toLowerCase()))||s.resource.toLowerCase().includes(o.toLowerCase()),t=!j||s.resource===j,a=!u||s.action===u;return r&&t&&a}),g=[...new Set(d.map(s=>s.resource))].sort(),p=[...new Set(d.map(s=>s.action))].sort(),I=L.reduce((s,r)=>{const t=r.resource;return s[t]||(s[t]=[]),s[t].push(r),s},{});return F?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error loading permissions"}),e.jsx("p",{className:"text-gray-600",children:"Please try again later"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Permission Management"}),e.jsx("p",{className:"text-gray-600",children:"View and understand system permissions"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Permissions"}),e.jsx(h,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Resources"}),e.jsx(S,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:g.length})})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Actions"}),e.jsx(w,{className:"h-4 w-4 text-green-600"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:p.length})})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"System Permissions"}),e.jsx(C,{className:"h-4 w-4 text-purple-600"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.filter(s=>s.resource==="System").length})})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(c,{children:"Filters"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(K,{placeholder:"Search permissions...",value:o,onChange:s=>P(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:j,onChange:s=>R(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"All Resources"}),g.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:u,onChange:s=>A(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"All Actions"}),p.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})})]}),T?e.jsx(l,{children:e.jsx(i,{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsx("div",{className:"space-y-6",children:Object.entries(I).map(([s,r])=>{const t=V[s]||h;return e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-5 w-5"}),s,e.jsxs(N,{variant:"outline",className:"ml-auto",children:[r.length," permissions"]})]}),e.jsxs(v,{children:["Permissions for ",s.toLowerCase()," management"]})]}),e.jsx(i,{children:e.jsxs(M,{children:[e.jsx(q,{children:e.jsxs(y,{children:[e.jsx(x,{children:"Permission"}),e.jsx(x,{children:"Action"}),e.jsx(x,{children:"Description"}),e.jsx(x,{children:"Permission ID"})]})}),e.jsx(O,{children:r.map(a=>e.jsxs(y,{children:[e.jsx(m,{children:e.jsx("div",{className:"font-medium",children:a.name})}),e.jsx(m,{children:e.jsx(N,{className:`${W[a.action]||"bg-gray-100 text-gray-800"}`,children:a.action})}),e.jsx(m,{children:e.jsx("div",{className:"max-w-md text-sm text-gray-600",children:a.description||"No description available"})}),e.jsx(m,{children:e.jsxs("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[a.permissionId.slice(0,8),"..."]})})]},a.permissionId))})]})})]},s)})}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Permission Summary"}),e.jsx(v,{children:"Overview of permissions by action type"})]}),e.jsx(i,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:p.map(s=>{const r=d.filter(t=>t.action===s).length;return e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s," Permissions"]})]},s)})})})]})]})}export{se as default};
//# sourceMappingURL=PermissionManagement-DRO-OuTV.js.map
