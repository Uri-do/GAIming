import{j as e,u as Y,r as l,L as q,H as J,n as x,T as A,i as Q}from"./index-B51ItZ5h.js";import{m as E}from"./mlModelsService-BZj8afAj.js";import{A as U,u as W,B as X,e as Z}from"./exportService-CAFm3AaC.js";import{C as c}from"./Card-tTIaziEs.js";import{B as i}from"./Button-CDIPLpLJ.js";import{B as z}from"./Badge-CFKe1Fd1.js";import{R as _}from"./refresh-cw-BiiooO2n.js";import{D as ee}from"./download-CZPgOUBS.js";import{P as te}from"./plus-zlnKERbv.js";import{A as F}from"./alert-triangle-BumWFkfF.js";import{C as b}from"./check-circle-CQ-g1P4Q.js";import{C as v}from"./clock-D1dtIjEg.js";import{E as ae}from"./eye-BCxAWvGz.js";import{P as B}from"./pause-A3aWZgkK.js";import{P as se}from"./play-BG1br7nY.js";import{M as re}from"./more-horizontal-CLkAnRld.js";import"./api-DLjschmT.js";const le=()=>{const L=Y(),{canManageModels:h,canExportModels:w,canDeployModels:k}=W(),[d,R]=l.useState([]),[p,m]=l.useState(!0),[P,g]=l.useState(null),[I]=l.useState(null),[o,$]=l.useState({});console.log("Selected model:",I);const[s,u]=l.useState({page:1,pageSize:20,search:"",sortBy:"createdDate",sortDirection:"desc"}),[r,H]=l.useState({totalCount:0,totalPages:0,hasNextPage:!1,hasPreviousPage:!1});l.useEffect(()=>{M()},[s]);const M=async()=>{try{m(!0),g(null);const t=await E.getModels(s);R(t.items),H({totalCount:t.totalCount,totalPages:t.totalPages,hasNextPage:t.hasNextPage,hasPreviousPage:t.hasPreviousPage});const a=t.items.map(async n=>{try{const N=await E.getModelPerformance(n.id);return{modelId:n.id,performance:N}}catch(N){return console.error(`Failed to load performance for model ${n.id}:`,N),null}}),f=await Promise.all(a),T={};f.forEach(n=>{n&&(T[n.modelId]=n.performance)}),$(T)}catch(t){g("Failed to load ML models"),console.error("Error loading models:",t)}finally{m(!1)}},O=t=>{u(a=>({...a,search:t,page:1}))},C=(t,a)=>{u(f=>({...f,[t]:a,page:1}))},S=t=>{u(a=>({...a,page:t}))},G=t=>{L(`/models/${t.id}`)},K=t=>{switch(t){case"deployed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"trained":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"training":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"retired":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},V=t=>{switch(t){case"deployed":return e.jsx(b,{className:"h-4 w-4"});case"trained":return e.jsx(x,{className:"h-4 w-4"});case"training":return e.jsx(v,{className:"h-4 w-4"});case"failed":return e.jsx(F,{className:"h-4 w-4"});case"retired":return e.jsx(B,{className:"h-4 w-4"});default:return e.jsx(Q,{className:"h-4 w-4"})}},D=t=>new Date(t).toLocaleDateString(),y=t=>`${(t*100).toFixed(1)}%`,j=async(t="csv")=>{if(!w){g("You do not have permission to export model data");return}try{m(!0),Z.exportModelsData(d,t,{filename:"ml-models-export",includeTimestamp:!0,customHeaders:{title:"GAIming ML Models Report"}})}catch(a){g("Failed to export model data"),console.error("Export error:",a)}finally{m(!1)}};return p&&!d.length?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(q,{size:"lg"})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:"ML Models Management - GAIming"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"ML Models Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage machine learning models and monitor performance"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>M(),disabled:p,children:[e.jsx(_,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),"Refresh"]}),w&&e.jsxs("div",{className:"relative group",children:[e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[e.jsx("button",{onClick:()=>j("csv"),className:"w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg",children:"Export CSV"}),e.jsx("button",{onClick:()=>j("excel"),className:"w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Export Excel"}),e.jsx("button",{onClick:()=>j("pdf"),className:"w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg",children:"Export PDF"})]})]}),h&&e.jsxs(i,{variant:"primary",size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"New Model"]})]})]}),P&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700 dark:text-red-300",children:P})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Models"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalCount}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center mt-1",children:[e.jsx(x,{className:"h-3 w-3 mr-1"}),"Active: ",d.filter(t=>t.isActive).length]})]}),e.jsx(x,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Deployed Models"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.filter(t=>t.status==="deployed").length}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center mt-1",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),"Production Ready"]})]}),e.jsx(b,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Training Models"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.filter(t=>t.status==="training").length}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 flex items-center mt-1",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),"In Progress"]})]}),e.jsx(v,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Average Accuracy"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Object.values(o).length>0?y(Object.values(o).reduce((t,a)=>t+a.precision,0)/Object.values(o).length):"N/A"}),e.jsxs("p",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center mt-1",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Performance"]})]}),e.jsx(A,{className:"h-8 w-8 text-purple-500"})]})})]}),Object.values(o).length>0&&e.jsxs(c,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Model Performance Comparison"}),e.jsx(X,{data:d.map(t=>{const a=o[t.id];return{name:t.name,precision:a?a.precision*100:0,recall:a?a.recall*100:0,f1Score:a?a.f1Score*100:0}}),bars:[{dataKey:"precision",fill:"#3B82F6",name:"Precision (%)"},{dataKey:"recall",fill:"#10B981",name:"Recall (%)"},{dataKey:"f1Score",fill:"#8B5CF6",name:"F1 Score (%)"}],height:300,formatYAxis:t=>`${t}%`,formatTooltip:(t,a)=>[`${t.toFixed(1)}%`,a]})]}),e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search models...",value:s.search||"",onChange:t=>O(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:s.modelType||"",onChange:t=>C("modelType",t.target.value||void 0),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"collaborative",children:"Collaborative Filtering"}),e.jsx("option",{value:"content-based",children:"Content-Based"}),e.jsx("option",{value:"hybrid",children:"Hybrid"}),e.jsx("option",{value:"deep-learning",children:"Deep Learning"})]}),e.jsxs("select",{value:s.status||"",onChange:t=>C("status",t.target.value||void 0),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"trained",children:"Trained"}),e.jsx("option",{value:"deployed",children:"Deployed"}),e.jsx("option",{value:"retired",children:"Retired"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})]})}),e.jsxs(c,{className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["ML Models (",r.totalCount,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Model"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Trained"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Deployed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created By"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(t=>{const a=o[t.id];return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx(x,{className:"h-5 w-5 text-blue-600 dark:text-blue-300"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["v",t.version]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(z,{variant:"secondary",children:t.modelType})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs(z,{className:K(t.status),children:[V(t.status),e.jsx("span",{className:"ml-1 capitalize",children:t.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a?e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Precision: ",y(a.precision)]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["F1: ",y(a.f1Score)]})]}):e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.lastTrainedDate?D(t.lastTrainedDate):"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.deployedDate?D(t.deployedDate):"Not deployed"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.createdBy}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>G(t),title:"View Model Details",children:e.jsx(ae,{className:"h-4 w-4"})}),k&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{},title:t.status==="deployed"?"Pause Model":"Deploy/Train Model",children:t.status==="deployed"?e.jsx(B,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})}),h&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{},title:"More Actions",children:e.jsx(re,{className:"h-4 w-4"})}),!k&&!h&&e.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Limited access"})]})})]},t.id)})})]})}),r.totalPages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",((s.page||1)-1)*(s.pageSize||20)+1," to"," ",Math.min((s.page||1)*(s.pageSize||20),r.totalCount)," of"," ",r.totalCount," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>S((s.page||1)-1),disabled:!r.hasPreviousPage,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",s.page||1," of ",r.totalPages]}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>S((s.page||1)+1),disabled:!r.hasNextPage,children:"Next"})]})]})})]})]})]})},we=()=>e.jsx(U,{requiredPermissions:["models.view"],children:e.jsx(le,{})});export{we as default};
//# sourceMappingURL=Models-1EZbmiov.js.map
