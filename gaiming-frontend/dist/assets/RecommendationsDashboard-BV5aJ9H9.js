import{r as s,k as B,j as e,T as b,b as x}from"./index-BlsT4Di8.js";import{u as f}from"./useQuery-pnymDCL_.js";import{u as C}from"./useMutation-DwmbD4R6.js";import{C as a}from"./Card-vncpb8C1.js";import{B as i}from"./Button-SeG07tvq.js";import{I as u}from"./input-DIDSjnMG.js";import{B as F}from"./Badge-DWypyQDT.js";import{a as h}from"./api-DCB3q_mZ.js";import{R as k}from"./refresh-cw-qDPeDhiU.js";import{T as G}from"./trending-up-D7PeCS0F.js";import{P as w}from"./play-DPBVfAWw.js";import{S as K}from"./star-C7aL9oYK.js";import{D as L}from"./download-D6mOS-Wn.js";import{E as Q}from"./eye-CJjTvcwI.js";import{C as $}from"./clock-CPE3ODyA.js";function ie(){const[n,S]=s.useState(1),[j,R]=s.useState("hybrid"),[p,I]=s.useState(10),[y,A]=s.useState("lobby"),[o,E]=s.useState(""),[d,T]=s.useState(""),r=B(),{data:l,isLoading:H}=f({queryKey:["recommendation-stats"],queryFn:()=>h.get(x.RECOMMENDATIONS.ANALYTICS),refetchInterval:3e4}),{data:g,isLoading:D,refetch:P}=f({queryKey:["recommendations",n,d,o],queryFn:()=>{let t=`${x.RECOMMENDATIONS.BASE}?playerId=${n}`;return d&&(t+=`&algorithm=${d}`),o&&(t+=`&search=${o}`),h.get(t)}}),N=C({mutationFn:t=>h.post(x.RECOMMENDATIONS.GENERATE,t),onSuccess:()=>{r.invalidateQueries({queryKey:["recommendations"]}),r.invalidateQueries({queryKey:["recommendation-stats"]})}}),M=C({mutationFn:({recommendationId:t,interactionType:m})=>h.post(x.RECOMMENDATIONS.INTERACTION,{recommendationId:t,interactionType:m,timestamp:new Date().toISOString()}),onSuccess:()=>{r.invalidateQueries({queryKey:["recommendations"]}),r.invalidateQueries({queryKey:["recommendation-stats"]})}}),O=()=>{N.mutate({playerId:n,algorithm:j,count:p,context:y})},v=(t,m)=>{M.mutate({recommendationId:t,interactionType:m})},q=t=>({collaborative:"bg-blue-100 text-blue-800","content-based":"bg-green-100 text-green-800",hybrid:"bg-purple-100 text-purple-800",bandit:"bg-orange-100 text-orange-800",popularity:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",c=t=>(t*100).toFixed(1)+"%";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Game Recommendations Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time recommendation engine management and analytics"})]}),e.jsx(i,{onClick:()=>{P(),r.invalidateQueries({queryKey:["recommendation-stats"]})},variant:"outline",icon:e.jsx(k,{className:"h-4 w-4"}),children:"Refresh Data"})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Recommendations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.totalRecommendations.toLocaleString()})]})]})}),e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Click-Through Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c(l.clickThroughRate)})]})]})}),e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Conversion Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c(l.conversionRate)})]})]})}),e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Average Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c(l.averageScore)})]})]})})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Generate New Recommendations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Player ID"}),e.jsx(u,{type:"number",value:n,onChange:t=>S(Number(t.target.value)),placeholder:"Enter player ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Algorithm"}),e.jsxs("select",{value:j,onChange:t=>R(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"hybrid",children:"Hybrid"}),e.jsx("option",{value:"collaborative",children:"Collaborative Filtering"}),e.jsx("option",{value:"content-based",children:"Content-Based"}),e.jsx("option",{value:"bandit",children:"Multi-Armed Bandit"}),e.jsx("option",{value:"popularity",children:"Popularity-Based"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Count"}),e.jsx(u,{type:"number",value:p,onChange:t=>I(Number(t.target.value)),min:1,max:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Context"}),e.jsxs("select",{value:y,onChange:t=>A(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"lobby",children:"Lobby"}),e.jsx("option",{value:"post-game",children:"Post-Game"}),e.jsx("option",{value:"profile",children:"Profile"}),e.jsx("option",{value:"homepage",children:"Homepage"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(i,{onClick:O,loading:N.isPending,className:"w-full",children:"Generate"})})]})]}),e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(u,{placeholder:"Search games...",value:o,onChange:t=>E(t.target.value)})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs("select",{value:d,onChange:t=>T(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"All Algorithms"}),e.jsx("option",{value:"hybrid",children:"Hybrid"}),e.jsx("option",{value:"collaborative",children:"Collaborative"}),e.jsx("option",{value:"content-based",children:"Content-Based"}),e.jsx("option",{value:"bandit",children:"Bandit"}),e.jsx("option",{value:"popularity",children:"Popularity"})]})})]})}),e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Recent Recommendations"}),e.jsx(i,{variant:"outline",icon:e.jsx(L,{className:"h-4 w-4"}),children:"Export Data"})]}),D?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-gray-400"})}):g&&g.length>0?e.jsx("div",{className:"space-y-4",children:g.map(t=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[t.game.imageUrl&&e.jsx("img",{src:t.game.imageUrl,alt:t.game.gameName,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.game.gameName}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[t.game.gameTypeName," â€¢ ",t.game.providerName]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.reason})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Score"}),e.jsx("p",{className:"font-semibold",children:c(t.score)})]}),e.jsx(F,{className:q(t.algorithm),children:t.algorithm}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{size:"sm",variant:t.isClicked?"default":"outline",onClick:()=>v(t.id,"click"),disabled:t.isClicked,children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:t.isPlayed?"default":"outline",onClick:()=>v(t.id,"play"),disabled:t.isPlayed,children:e.jsx(w,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Position: #",t.position]}),e.jsxs("span",{children:["Context: ",t.context]}),e.jsxs("span",{children:["Category: ",t.category]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(t.generatedDate).toLocaleString()})]})]})]},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No recommendations found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generate some recommendations to get started."})]})]})]})}export{ie as default};
//# sourceMappingURL=RecommendationsDashboard-BV5aJ9H9.js.map
