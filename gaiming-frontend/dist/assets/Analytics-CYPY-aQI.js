var ve=Object.defineProperty;var xe=(s,a,e)=>a in s?ve(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var ee=(s,a,e)=>xe(s,typeof a!="symbol"?a+"":a,e);import{R as k,l as te,r as C,j as t,L as fe,H as be,U as je,T as ae,A as V,B as we}from"./index-B51ItZ5h.js";import{b as L}from"./api-DLjschmT.js";import{i as ke,D as Pe,f as Ae,E as Ne,L as Y,a as z,C as De,b as Se,c as M,d as Re,g as J,h as Te,j as Ce,k as ce,l as Oe,G as Le,m as re,n as Ee,X as me,Y as de,o as Ue,R as _e,p as Ie,T as Be,q as $e,A as Me,u as Fe,B as Ge,e as Ke}from"./exportService-CAFm3AaC.js";import{P as Q}from"./PieChart-B1C5KVF9.js";import{C as N}from"./Card-tTIaziEs.js";import{B as X}from"./Button-CDIPLpLJ.js";import{R as ze}from"./refresh-cw-BiiooO2n.js";import{D as He}from"./download-CZPgOUBS.js";import{A as se}from"./alert-triangle-BumWFkfF.js";import{T as We}from"./trending-up-CcBaz28r.js";import{D as Ve}from"./dollar-sign-Cpv4PdFW.js";import{C as Ye}from"./clock-D1dtIjEg.js";var Qe=["type","layout","connectNulls","ref"],Xe=["key"];function U(s){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},U(s)}function ne(s,a){if(s==null)return{};var e=Je(s,a),r,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(i=0;i<c.length;i++)r=c[i],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(e[r]=s[r])}return e}function Je(s,a){if(s==null)return{};var e={};for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){if(a.indexOf(r)>=0)continue;e[r]=s[r]}return e}function F(){return F=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r])}return s},F.apply(this,arguments)}function ie(s,a){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,r)}return e}function A(s){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?ie(Object(e),!0).forEach(function(r){D(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ie(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}function E(s){return tt(s)||et(s)||Ze(s)||qe()}function qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ze(s,a){if(s){if(typeof s=="string")return q(s,a);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return q(s,a)}}function et(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function tt(s){if(Array.isArray(s))return q(s)}function q(s,a){(a==null||a>s.length)&&(a=s.length);for(var e=0,r=new Array(a);e<a;e++)r[e]=s[e];return r}function at(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function oe(s,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,pe(r.key),r)}}function rt(s,a,e){return a&&oe(s.prototype,a),e&&oe(s,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function st(s,a,e){return a=H(a),nt(s,ue()?Reflect.construct(a,e||[],H(s).constructor):a.apply(s,e))}function nt(s,a){if(a&&(U(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return it(s)}function it(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function ue(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ue=function(){return!!s})()}function H(s){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(s)}function ot(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&Z(s,a)}function Z(s,a){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z(s,a)}function D(s,a,e){return a=pe(a),a in s?Object.defineProperty(s,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[a]=e,s}function pe(s){var a=lt(s,"string");return U(a)=="symbol"?a:a+""}function lt(s,a){if(U(s)!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var r=e.call(s,a);if(U(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var G=function(s){function a(){var e;at(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=st(this,a,[].concat(i)),D(e,"state",{isAnimationFinished:!0,totalLength:0}),D(e,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),D(e,"getStrokeDasharray",function(o,l,m){var p=m.reduce(function(b,n){return b+n});if(!p)return e.generateSimpleStrokeDasharray(l,o);for(var v=Math.floor(o/p),y=o%p,h=l-o,x=[],u=0,g=0;u<m.length;g+=m[u],++u)if(g+m[u]>y){x=[].concat(E(m.slice(0,u)),[y-g]);break}var f=x.length%2===0?[0,h]:[h];return[].concat(E(a.repeat(m,v)),E(x),f).map(function(b){return"".concat(b,"px")}).join(", ")}),D(e,"id",Oe("recharts-line-")),D(e,"pathRef",function(o){e.mainCurve=o}),D(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),D(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return ot(a,s),rt(a,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var c=this.props,o=c.points,l=c.xAxis,m=c.yAxis,p=c.layout,v=c.children,y=Ae(v,Ne);if(!y)return null;var h=function(g,f){return{x:g.x,y:g.y,value:g.value,errorVal:ce(g.payload,f)}},x={clipPath:r?"url(#clipPath-".concat(i,")"):null};return k.createElement(Y,x,y.map(function(u){return k.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:o,xAxis:l,yAxis:m,layout:p,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,c){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,m=l.dot,p=l.points,v=l.dataKey,y=z(this.props,!1),h=z(m,!0),x=p.map(function(g,f){var b=A(A(A({key:"dot-".concat(f),r:3},y),h),{},{index:f,cx:g.x,cy:g.y,value:g.value,dataKey:v,payload:g.payload,points:p});return a.renderDotItem(m,b)}),u={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(c,")"):null};return k.createElement(Y,F({className:"recharts-line-dots",key:"dots"},u),x)}},{key:"renderCurveStatically",value:function(r,i,c,o){var l=this.props,m=l.type,p=l.layout,v=l.connectNulls;l.ref;var y=ne(l,Qe),h=A(A(A({},z(y,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(c,")"):null,points:r},o),{},{type:m,layout:p,connectNulls:v});return k.createElement(De,F({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var c=this,o=this.props,l=o.points,m=o.strokeDasharray,p=o.isAnimationActive,v=o.animationBegin,y=o.animationDuration,h=o.animationEasing,x=o.animationId,u=o.animateNewValues,g=o.width,f=o.height,b=this.state,n=b.prevPoints,d=b.totalLength;return k.createElement(Se,{begin:v,duration:y,isActive:p,easing:h,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var w=j.t;if(n){var R=n.length/l.length,S=l.map(function(P,W){var B=Math.floor(W*R);if(n[B]){var $=n[B],O=M($.x,P.x),ye=M($.y,P.y);return A(A({},P),{},{x:O(w),y:ye(w)})}if(u){var he=M(g*2,P.x),ge=M(f/2,P.y);return A(A({},P),{},{x:he(w),y:ge(w)})}return A(A({},P),{},{x:P.x,y:P.y})});return c.renderCurveStatically(S,r,i)}var T=M(0,d),_=T(w),I;if(m){var K="".concat(m).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});I=c.getStrokeDasharray(_,d,K)}else I=c.generateSimpleStrokeDasharray(d,_);return c.renderCurveStatically(l,r,i,{strokeDasharray:I})})}},{key:"renderCurve",value:function(r,i){var c=this.props,o=c.points,l=c.isAnimationActive,m=this.state,p=m.prevPoints,v=m.totalLength;return l&&o&&o.length&&(!p&&v>0||!Re(p,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,c=i.hide,o=i.dot,l=i.points,m=i.className,p=i.xAxis,v=i.yAxis,y=i.top,h=i.left,x=i.width,u=i.height,g=i.isAnimationActive,f=i.id;if(c||!l||!l.length)return null;var b=this.state.isAnimationFinished,n=l.length===1,d=te("recharts-line",m),j=p&&p.allowDataOverflow,w=v&&v.allowDataOverflow,R=j||w,S=J(f)?this.id:f,T=(r=z(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},_=T.r,I=_===void 0?3:_,K=T.strokeWidth,P=K===void 0?2:K,W=Te(o)?o:{},B=W.clipDot,$=B===void 0?!0:B,O=I*2+P;return k.createElement(Y,{className:d},j||w?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(S)},k.createElement("rect",{x:j?h:h-x/2,y:w?y:y-u/2,width:j?x:x*2,height:w?u:u*2})),!$&&k.createElement("clipPath",{id:"clipPath-dots-".concat(S)},k.createElement("rect",{x:h-O/2,y:y-O/2,width:x+O,height:u+O}))):null,!n&&this.renderCurve(R,S),this.renderErrorBar(R,S),(n||o)&&this.renderDots(R,$,S),(!g||b)&&Ce.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var c=r.length%2!==0?[].concat(E(r),[0]):r,o=[],l=0;l<i;++l)o=[].concat(E(o),E(c));return o}},{key:"renderDotItem",value:function(r,i){var c;if(k.isValidElement(r))c=k.cloneElement(r,i);else if(ke(r))c=r(i);else{var o=i.key,l=ne(i,Xe),m=te("recharts-line-dot",typeof r!="boolean"?r.className:"");c=k.createElement(Pe,F({key:o},l,{className:m}))}return c}}])}(C.PureComponent);D(G,"displayName","Line");D(G,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Le.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});D(G,"getComposedData",function(s){var a=s.props,e=s.xAxis,r=s.yAxis,i=s.xAxisTicks,c=s.yAxisTicks,o=s.dataKey,l=s.bandSize,m=s.displayedData,p=s.offset,v=a.layout,y=m.map(function(h,x){var u=ce(h,o);return v==="horizontal"?{x:re({axis:e,ticks:i,bandSize:l,entry:h,index:x}),y:J(u)?null:r.scale(u),value:u,payload:h}:{x:J(u)?null:e.scale(u),y:re({axis:r,ticks:c,bandSize:l,entry:h,index:x}),value:u,payload:h}});return A({points:y,layout:v},p)});var ct=Ee({chartName:"LineChart",GraphicalChild:G,axisComponents:[{axisType:"xAxis",AxisComp:me},{axisType:"yAxis",AxisComp:de}],formatAxisMap:Ue});class mt{constructor(){ee(this,"baseUrl","/Analytics")}async getComprehensiveAnalytics(a={}){var c,o,l,m,p,v,y,h,x,u,g,f,b,n,d,j,w,R,S,T;const r=(await L.get(`${this.baseUrl}/dashboard`)).data.data;return{overview:{totalPlayers:((c=r.overview)==null?void 0:c.totalUsers)||0,activePlayers:((o=r.overview)==null?void 0:o.activeUsers)||0,totalGames:((l=r.overview)==null?void 0:l.totalGames)||0,activeGames:((m=r.overview)==null?void 0:m.activeGames)||0,totalRecommendations:((p=r.overview)==null?void 0:p.totalRecommendations)||0,totalRevenue:((v=r.overview)==null?void 0:v.revenue)||0,averageCTR:((y=r.overview)==null?void 0:y.clickThroughRate)||0,averageConversionRate:((h=r.overview)==null?void 0:h.conversionRate)||0,systemHealth:95,lastUpdated:new Date().toISOString()},recommendations:{startDate:"2024-01-01",endDate:"2024-01-31",totalRecommendations:((x=r.recommendations)==null?void 0:x.totalRecommendations)||0,totalClicks:((u=r.recommendations)==null?void 0:u.totalClicks)||0,totalPlays:((g=r.recommendations)==null?void 0:g.totalPlays)||68,clickThroughRate:((f=r.recommendations)==null?void 0:f.clickThroughRate)||0,conversionRate:.75,algorithmCTR:{},algorithmConversionRate:{},algorithmUsage:{},recommendationRevenue:0,revenuePerRecommendation:.82,gameRecommendationCounts:{},gameConversionRates:{},playerSegmentMetrics:{}},games:{totalGames:((b=r.overview)==null?void 0:b.totalGames)||0,activeGames:((n=r.overview)==null?void 0:n.activeGames)||0,newGames:0,topPerformingGames:[],gameTypeDistribution:{Slots:80,"Table Games":15,"Live Casino":5},providerDistribution:{"Provider A":40,"Provider B":35,"Provider C":25},volatilityDistribution:{Low:30,Medium:50,High:20},averageRTP:96.5,gameEngagement:[]},players:{totalPlayers:((d=r.overview)==null?void 0:d.totalUsers)||0,activePlayers:((j=r.overview)==null?void 0:j.activeUsers)||0,newPlayers:((w=r.userActivity)==null?void 0:w.newUsersToday)||0,churnedPlayers:0,playerSegments:{Casual:60,Regular:30,VIP:10},vipDistribution:{Bronze:70,Silver:20,Gold:8,Platinum:2},riskDistribution:{Low:80,Medium:15,High:5},countryDistribution:{US:40,UK:25,CA:20,Other:15},retentionRates:[],lifetimeValueDistribution:{"$0-100":50,"$100-500":30,"$500+":20}},revenue:{totalRevenue:((R=r.overview)==null?void 0:R.revenue)||0,revenueGrowth:12.5,revenueByGame:{},revenueByProvider:{},revenueByPlayerSegment:{},revenueByCountry:{},averageRevenuePerPlayer:150,averageRevenuePerSession:25,revenueTrends:[{date:"2024-01-01",revenue:1e4,players:100,sessions:500,averageRevenuePerPlayer:100},{date:"2024-01-02",revenue:12e3,players:120,sessions:600,averageRevenuePerPlayer:100},{date:"2024-01-03",revenue:11e3,players:110,sessions:550,averageRevenuePerPlayer:100}]},performance:{systemMetrics:{cpuUsage:((S=r.realTimeStats)==null?void 0:S.cpuUsage)||25,memoryUsage:((T=r.realTimeStats)==null?void 0:T.memoryUsage)||65,diskUsage:45,networkLatency:12,uptime:99.9,errorRate:.1},algorithmPerformance:[],apiPerformance:{totalRequests:1e4,averageResponseTime:150,errorRate:.1,throughput:100,endpointMetrics:[]},databasePerformance:{connectionPoolSize:50,activeConnections:12,averageQueryTime:25,slowQueries:2,deadlocks:0,cacheHitRate:85},cachePerformance:{hitRate:85,missRate:15,evictionRate:2,memoryUsage:60,keyCount:1e3,averageResponseTime:5}},trends:{playerTrends:[],revenueTrends:[],engagementTrends:[],recommendationTrends:[],gamePopularityTrends:[]}}}async getRecommendationAnalytics(a={}){var o,l,m,p;const e=new URLSearchParams;a.startDate&&e.append("startDate",a.startDate),a.endDate&&e.append("endDate",a.endDate),a.algorithm&&e.append("algorithm",a.algorithm);const i=(await L.get(`${this.baseUrl}/recommendation-performance?${e.toString()}`)).data.data;return{startDate:a.startDate||"2024-01-01",endDate:a.endDate||"2024-01-31",totalRecommendations:((o=i.summary)==null?void 0:o.totalRecommendations)||0,totalClicks:((l=i.summary)==null?void 0:l.totalClicks)||0,totalPlays:((m=i.summary)==null?void 0:m.totalPlays)||68,clickThroughRate:((p=i.summary)==null?void 0:p.clickThroughRate)||0,conversionRate:.75,algorithmCTR:{},algorithmConversionRate:{},algorithmUsage:{},recommendationRevenue:0,revenuePerRecommendation:.82,gameRecommendationCounts:{},gameConversionRates:{},playerSegmentMetrics:{}}}async getDiversityMetrics(a={}){return await L.get(`${this.baseUrl}/system-health`),{intraListDiversity:.75,catalogCoverage:.82,noveltyScore:.68,serendipityScore:.71,providerDistribution:{Provider1:.65},gameTypeDistribution:{},volatilityDistribution:{}}}async getPerformanceMetrics(){var i,c,o,l,m,p,v,y,h,x,u,g,f,b,n,d,j;const e=(await L.get(`${this.baseUrl}/system-health`)).data.data;return{systemMetrics:{cpuUsage:((i=e.performance)==null?void 0:i.cpuUsage)||25,memoryUsage:((c=e.performance)==null?void 0:c.memoryUsage)||65,diskUsage:((o=e.performance)==null?void 0:o.diskUsage)||45,networkLatency:((l=e.performance)==null?void 0:l.networkLatency)||12,uptime:99.9,errorRate:((m=e.apiMetrics)==null?void 0:m.errorRate)||.1},algorithmPerformance:[],apiPerformance:{totalRequests:((p=e.apiMetrics)==null?void 0:p.requestsPerMinute)*60||1e4,averageResponseTime:((v=e.apiMetrics)==null?void 0:v.averageResponseTime)||150,errorRate:((y=e.apiMetrics)==null?void 0:y.errorRate)||.1,throughput:((h=e.apiMetrics)==null?void 0:h.requestsPerMinute)||100,endpointMetrics:[]},databasePerformance:{connectionPoolSize:((u=(x=e.database)==null?void 0:x.connectionPool)==null?void 0:u.max)||50,activeConnections:((f=(g=e.database)==null?void 0:g.connectionPool)==null?void 0:f.active)||12,averageQueryTime:((n=(b=e.database)==null?void 0:b.queryPerformance)==null?void 0:n.averageQueryTime)||25,slowQueries:((j=(d=e.database)==null?void 0:d.queryPerformance)==null?void 0:j.slowQueries)||2,deadlocks:0,cacheHitRate:85},cachePerformance:{hitRate:85,missRate:15,evictionRate:2,memoryUsage:60,keyCount:1e3,averageResponseTime:5}}}async getTrendAnalytics(a={}){const e=new URLSearchParams;return a.startDate&&e.append("startDate",a.startDate),a.endDate&&e.append("endDate",a.endDate),a.granularity&&e.append("granularity",a.granularity),await L.get(`${this.baseUrl}/user-engagement?${e.toString()}`),{playerTrends:[],revenueTrends:[],engagementTrends:[],recommendationTrends:[],gamePopularityTrends:[]}}async exportAnalytics(a){const e=JSON.stringify({message:"Export functionality not yet implemented",timestamp:new Date().toISOString(),type:a.type});return new Blob([e],{type:"application/json"})}async getRealtimeMetrics(){var r,i,c,o,l,m;const e=(await L.get(`${this.baseUrl}/dashboard`)).data.data;return{currentOnlineUsers:((r=e.realTimeStats)==null?void 0:r.currentOnlineUsers)||234,gamesBeingPlayed:((i=e.realTimeStats)==null?void 0:i.gamesBeingPlayed)||89,recommendationsGeneratedToday:((c=e.realTimeStats)==null?void 0:c.recommendationsGeneratedToday)||1247,clicksInLastHour:((o=e.realTimeStats)==null?void 0:o.clicksInLastHour)||156,playsInLastHour:((l=e.realTimeStats)==null?void 0:l.playsInLastHour)||89,revenueToday:((m=e.realTimeStats)==null?void 0:m.revenueToday)||3456.78}}}const dt=new mt,le=({data:s,lines:a,height:e=300,showGrid:r=!0,showLegend:i=!0,showTooltip:c=!0,xAxisKey:o="name",formatXAxis:l,formatYAxis:m,formatTooltip:p,className:v=""})=>t.jsx("div",{className:`w-full ${v}`,children:t.jsx(_e,{width:"100%",height:e,children:t.jsxs(ct,{data:s,margin:{top:5,right:30,left:20,bottom:5},children:[r&&t.jsx(Ie,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),t.jsx(me,{dataKey:o,tickFormatter:l,className:"text-gray-600 dark:text-gray-400",fontSize:12}),t.jsx(de,{tickFormatter:m,className:"text-gray-600 dark:text-gray-400",fontSize:12}),c&&t.jsx(Be,{formatter:p,contentStyle:{backgroundColor:"var(--tooltip-bg)",border:"1px solid var(--tooltip-border)",borderRadius:"8px",color:"var(--tooltip-text)"}}),i&&t.jsx($e,{wrapperStyle:{color:"var(--legend-text)"}}),a.map((y,h)=>t.jsx(G,{type:"monotone",dataKey:y.dataKey,stroke:y.stroke,strokeWidth:y.strokeWidth||2,strokeDasharray:y.strokeDasharray,name:y.name||y.dataKey,dot:{r:4},activeDot:{r:6}},y.dataKey))]})})}),ut=()=>{const{canExportAnalytics:s,user:a}=Fe(),[e,r]=C.useState(null),[i,c]=C.useState(!0),[o,l]=C.useState(null),[m,p]=C.useState("30d"),[v,y]=C.useState({startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],granularity:"day"});C.useEffect(()=>{h()},[v]);const h=async()=>{try{c(!0),l(null);const n=await dt.getComprehensiveAnalytics(v);r(n)}catch(n){l("Failed to load analytics data"),console.error("Error loading analytics:",n)}finally{c(!1)}},x=n=>{p(n);const d=new Date;let j=new Date;switch(n){case"7d":j.setDate(d.getDate()-7);break;case"30d":j.setDate(d.getDate()-30);break;case"90d":j.setDate(d.getDate()-90);break;case"1y":j.setFullYear(d.getFullYear()-1);break}y(w=>({...w,startDate:j.toISOString().split("T")[0],endDate:d.toISOString().split("T")[0]}))},u=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),g=n=>`${n.toFixed(1)}%`,f=n=>n.toLocaleString(),b=async(n="csv")=>{if(!s){l("You do not have permission to export reports");return}if(!e){l("No analytics data available to export");return}try{c(!0),Ke.exportAnalyticsReport(e,n,{filename:"analytics-report",includeTimestamp:!0,customHeaders:{title:"GAIming Analytics Report",timeRange:m,generatedBy:(a==null?void 0:a.name)||"Unknown"}})}catch(d){l("Failed to export analytics report"),console.error("Export error:",d)}finally{c(!1)}};return i&&!e?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(fe,{size:"lg"})}):t.jsxs(t.Fragment,{children:[t.jsx(be,{children:t.jsx("title",{children:"Analytics Dashboard - GAIming"})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Analytics Dashboard"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive analytics and performance insights"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex items-center space-x-2",children:["7d","30d","90d","1y"].map(n=>t.jsx(X,{variant:m===n?"primary":"outline",size:"sm",onClick:()=>x(n),children:n},n))}),t.jsxs(X,{variant:"outline",size:"sm",onClick:()=>h(),disabled:i,children:[t.jsx(ze,{className:`h-4 w-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]}),s&&t.jsxs("div",{className:"relative group",children:[t.jsxs(X,{variant:"outline",size:"sm",children:[t.jsx(He,{className:"h-4 w-4 mr-2"}),"Export Report"]}),t.jsxs("div",{className:"absolute right-0 top-full mt-1 w-36 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[t.jsx("button",{onClick:()=>b("csv"),className:"w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg",children:"Export CSV"}),t.jsx("button",{onClick:()=>b("excel"),className:"w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Export Excel"}),t.jsx("button",{onClick:()=>b("pdf"),className:"w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg",children:"Export PDF"})]})]})]})]}),o&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(se,{className:"h-5 w-5 text-red-500 mr-2"}),t.jsx("span",{className:"text-red-700 dark:text-red-300",children:o})]})}),e&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(N,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Players"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f(e.overview.totalPlayers)}),t.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center mt-1",children:[t.jsx(We,{className:"h-3 w-3 mr-1"}),"Active: ",f(e.overview.activePlayers)]})]}),t.jsx(je,{className:"h-8 w-8 text-blue-500"})]})}),t.jsx(N,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u(e.overview.totalRevenue)}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Last updated: ",new Date(e.overview.lastUpdated).toLocaleString()]})]}),t.jsx(Ve,{className:"h-8 w-8 text-green-500"})]})}),t.jsx(N,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Recommendations"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f(e.overview.totalRecommendations)}),t.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center mt-1",children:[t.jsx(ae,{className:"h-3 w-3 mr-1"}),"CTR: ",g(e.overview.averageCTR)]})]}),t.jsx(ae,{className:"h-8 w-8 text-purple-500"})]})}),t.jsx(N,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Health"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g(e.overview.systemHealth)}),t.jsxs("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 flex items-center mt-1",children:[t.jsx(V,{className:"h-3 w-3 mr-1"}),"Conversion: ",g(e.overview.averageConversionRate)]})]}),t.jsx(V,{className:"h-8 w-8 text-emerald-500"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Revenue Trends"}),t.jsx(le,{data:e.revenue.revenueTrends.map(n=>({name:new Date(n.date).toLocaleDateString(),revenue:n.revenue,players:n.players})),lines:[{dataKey:"revenue",stroke:"#10B981",name:"Revenue"}],height:300,formatYAxis:n=>u(n),formatTooltip:(n,d)=>[d==="revenue"?u(n):f(n),d==="revenue"?"Revenue":"Players"]})]}),t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Player Activity"}),t.jsx(le,{data:e.revenue.revenueTrends.map(n=>({name:new Date(n.date).toLocaleDateString(),players:n.players,sessions:n.sessions})),lines:[{dataKey:"players",stroke:"#3B82F6",name:"Players"},{dataKey:"sessions",stroke:"#8B5CF6",name:"Sessions"}],height:300,formatYAxis:n=>f(n),formatTooltip:(n,d)=>[f(n),d]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Game Type Distribution"}),t.jsx(Q,{data:Object.entries(e.games.gameTypeDistribution).map(([n,d])=>({name:n,value:d})),height:250,formatTooltip:(n,d)=>[`${n} games`,d]})]}),t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Provider Distribution"}),t.jsx(Q,{data:Object.entries(e.games.providerDistribution).map(([n,d])=>({name:n,value:d})),height:250,formatTooltip:(n,d)=>[`${n} games`,d]})]}),t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Performing Games"}),t.jsx("div",{className:"space-y-3",children:e.games.topPerformingGames.slice(0,5).map((n,d)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-300",children:d+1})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.gameName}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.provider})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:u(n.revenue)}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[f(n.sessions)," sessions"]})]})]},n.gameId))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Algorithm Performance"}),t.jsx(Ge,{data:Object.entries(e.recommendations.algorithmCTR).map(([n,d])=>({name:n,ctr:d,conversion:e.recommendations.algorithmConversionRate[n]||0})),bars:[{dataKey:"ctr",fill:"#3B82F6",name:"Click-through Rate (%)"},{dataKey:"conversion",fill:"#10B981",name:"Conversion Rate (%)"}],height:300,formatYAxis:n=>`${n}%`,formatTooltip:(n,d)=>[`${n}%`,d]})]}),t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Player Segments"}),t.jsx(Q,{data:Object.entries(e.players.playerSegments).map(([n,d])=>({name:n,value:d})),height:300,formatTooltip:(n,d)=>[`${n} players`,d]})]})]}),t.jsxs(N,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Performance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"CPU Usage"}),t.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g(e.performance.systemMetrics.cpuUsage)})]}),t.jsx(V,{className:"h-6 w-6 text-blue-500"})]})}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Memory Usage"}),t.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g(e.performance.systemMetrics.memoryUsage)})]}),t.jsx(we,{className:"h-6 w-6 text-green-500"})]})}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"API Response Time"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[e.performance.apiPerformance.averageResponseTime,"ms"]})]}),t.jsx(Ye,{className:"h-6 w-6 text-yellow-500"})]})}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Error Rate"}),t.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g(e.performance.apiPerformance.errorRate)})]}),t.jsx(se,{className:"h-6 w-6 text-red-500"})]})})]})]})]})]})]})},Nt=()=>t.jsx(Me,{requiredPermissions:["analytics.view"],children:t.jsx(ut,{})});export{Nt as default};
//# sourceMappingURL=Analytics-CYPY-aQI.js.map
