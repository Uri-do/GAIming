import{r as j,j as e,A as h,h as p,S as L,M}from"./index-BlsT4Di8.js";import{u as U}from"./useQuery-pnymDCL_.js";import{I as F}from"./input-DIDSjnMG.js";import{B as R}from"./Badge-DWypyQDT.js";import{T as W,a as z,b as w,c as r,d as O,e as a}from"./table-BtuLCMQm.js";import{C as n,a as i,b as c,c as o,d as P}from"./Card-vncpb8C1.js";import{C as v}from"./check-circle-BGCECDpU.js";import{X as b}from"./x-circle-Dk3Q00ml.js";import{A as k}from"./alert-triangle-B8aR42Ei.js";import{C as B}from"./clock-CPE3ODyA.js";import{M as E}from"./map-pin-C817W7D2.js";import{S as H}from"./smartphone-CXR5sNR-.js";const K={login:p,logout:p,create:v,update:h,delete:b,view:h,error:k},X=l=>l.toLowerCase().includes("mobile")?H:M;function re(){const[l,A]=j.useState(""),[f]=j.useState(""),[u,y]=j.useState(""),[g,C]=j.useState("7"),{data:d=[],isLoading:S,error:D}=U({queryKey:["user-activity",f,u,g],queryFn:async()=>[{id:"1",userId:"user-1",username:"admin",action:"login",resource:"Authentication",timestamp:new Date().toISOString(),ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",success:!0},{id:"2",userId:"user-1",username:"admin",action:"create",resource:"User",timestamp:new Date(Date.now()-36e5).toISOString(),ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",success:!0,details:"Created user: john.doe"},{id:"3",userId:"user-2",username:"john.doe",action:"login",resource:"Authentication",timestamp:new Date(Date.now()-72e5).toISOString(),ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)",success:!1,details:"Invalid password"}]}),N=d.filter(s=>{const x=s.username.toLowerCase().includes(l.toLowerCase())||s.action.toLowerCase().includes(l.toLowerCase())||s.resource.toLowerCase().includes(l.toLowerCase()),m=!f||s.userId===f,t=!u||s.action===u;return x&&m&&t}),T=s=>new Date(s).toLocaleString(),I=s=>{const x=new Date,m=new Date(s),t=Math.floor((x.getTime()-m.getTime())/(1e3*60));return t<1?"Just now":t<60?`${t}m ago`:t<1440?`${Math.floor(t/60)}h ago`:`${Math.floor(t/1440)}d ago`};return D?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error loading activity"}),e.jsx("p",{className:"text-gray-600",children:"Please try again later"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Activity"}),e.jsx("p",{className:"text-gray-600",children:"Monitor user actions and system events"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Activities"}),e.jsx(h,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Successful Actions"}),e.jsx(v,{className:"h-4 w-4 text-green-600"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.filter(s=>s.success).length})})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Failed Actions"}),e.jsx(b,{className:"h-4 w-4 text-red-600"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.filter(s=>!s.success).length})})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(p,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:new Set(d.map(s=>s.userId)).size})})]})]}),e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(c,{children:"Filters"})}),e.jsx(o,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(F,{placeholder:"Search activities...",value:l,onChange:s=>A(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:g,onChange:s=>C(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm w-32",children:[e.jsx("option",{value:"1",children:"Last 24h"}),e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"})]}),e.jsxs("select",{value:u,onChange:s=>y(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm w-32",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"logout",children:"Logout"}),e.jsx("option",{value:"create",children:"Create"}),e.jsx("option",{value:"update",children:"Update"}),e.jsx("option",{value:"delete",children:"Delete"})]})]})]})})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Recent Activity"}),e.jsxs(P,{children:[N.length," activities found"]})]}),e.jsx(o,{children:S?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(W,{children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(r,{children:"User"}),e.jsx(r,{children:"Action"}),e.jsx(r,{children:"Resource"}),e.jsx(r,{children:"Time"}),e.jsx(r,{children:"Location"}),e.jsx(r,{children:"Device"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Details"})]})}),e.jsx(O,{children:N.map(s=>{const x=K[s.action]||h,m=X(s.userAgent);return e.jsxs(w,{children:[e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.username})]})}),e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"capitalize",children:s.action})]})}),e.jsx(a,{children:s.resource}),e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:I(s.timestamp)}),e.jsx("div",{className:"text-xs text-gray-500",children:T(s.timestamp)})]})]})}),e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.ipAddress})]})}),e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.userAgent.includes("Mobile")?"Mobile":"Desktop"})]})}),e.jsx(a,{children:e.jsx(R,{variant:s.success?"default":"error",children:s.success?"Success":"Failed"})}),e.jsx(a,{children:e.jsx("div",{className:"max-w-xs truncate text-sm text-gray-600",children:s.details||"-"})})]},s.id)})})]})})]})]})}export{re as default};
//# sourceMappingURL=UserActivity-CvMTkhBB.js.map
