{"version":3,"file":"PermissionManagement-B747Ra0O.js","sources":["../../src/pages/admin/PermissionManagement.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport {\n  Key,\n  Search,\n  Shield,\n  Users,\n  Settings,\n  Database,\n  BarChart3,\n  FileText\n} from 'lucide-react'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/Badge'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/Card'\nimport { userManagementApi, Permission } from '@/services/userManagementApi'\n\nconst resourceIcons: Record<string, React.ComponentType<{ className?: string }>> = {\n  Users: Users,\n  Roles: Shield,\n  Permissions: Key,\n  Analytics: BarChart3,\n  Reports: FileText,\n  Recommendations: Database,\n  System: Settings,\n}\n\nconst actionColors: Record<string, string> = {\n  Read: 'bg-blue-100 text-blue-800',\n  Write: 'bg-green-100 text-green-800',\n  Delete: 'bg-red-100 text-red-800',\n  Admin: 'bg-purple-100 text-purple-800',\n}\n\nfunction PermissionManagement() {\n  const [search, setSearch] = useState('')\n  const [resourceFilter, setResourceFilter] = useState<string>('')\n  const [actionFilter, setActionFilter] = useState<string>('')\n\n  // Fetch permissions\n  const { data: permissions = [], isLoading, error } = useQuery<Permission[]>({\n    queryKey: ['permissions'],\n    queryFn: userManagementApi.getPermissions,\n  })\n\n  // Filter permissions\n  const filteredPermissions = permissions.filter(permission => {\n    const matchesSearch = permission.name.toLowerCase().includes(search.toLowerCase()) ||\n                         permission.description?.toLowerCase().includes(search.toLowerCase()) ||\n                         permission.resource.toLowerCase().includes(search.toLowerCase())\n    \n    const matchesResource = !resourceFilter || permission.resource === resourceFilter\n    const matchesAction = !actionFilter || permission.action === actionFilter\n    \n    return matchesSearch && matchesResource && matchesAction\n  })\n\n  // Get unique resources and actions for filters\n  const resources = [...new Set(permissions.map(p => p.resource))].sort()\n  const actions = [...new Set(permissions.map(p => p.action))].sort()\n\n  // Group permissions by resource\n  const groupedPermissions = filteredPermissions.reduce((groups, permission) => {\n    const resource = permission.resource\n    if (!groups[resource]) {\n      groups[resource] = []\n    }\n    groups[resource].push(permission)\n    return groups\n  }, {} as Record<string, Permission[]>)\n\n  if (error) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <Key className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Error loading permissions</h3>\n          <p className=\"text-gray-600\">Please try again later</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Permission Management</h1>\n          <p className=\"text-gray-600\">View and understand system permissions</p>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Permissions</CardTitle>\n            <Key className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{permissions.length}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Resources</CardTitle>\n            <Database className=\"h-4 w-4 text-blue-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{resources.length}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Actions</CardTitle>\n            <Settings className=\"h-4 w-4 text-green-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{actions.length}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">System Permissions</CardTitle>\n            <Shield className=\"h-4 w-4 text-purple-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {permissions.filter(p => p.resource === 'System').length}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Filters</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                <Input\n                  placeholder=\"Search permissions...\"\n                  value={search}\n                  onChange={(e) => setSearch(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <select\n                value={resourceFilter}\n                onChange={(e) => setResourceFilter(e.target.value)}\n                className=\"px-3 py-2 border border-gray-300 rounded-md text-sm\"\n              >\n                <option value=\"\">All Resources</option>\n                {resources.map(resource => (\n                  <option key={resource} value={resource}>{resource}</option>\n                ))}\n              </select>\n              <select\n                value={actionFilter}\n                onChange={(e) => setActionFilter(e.target.value)}\n                className=\"px-3 py-2 border border-gray-300 rounded-md text-sm\"\n              >\n                <option value=\"\">All Actions</option>\n                {actions.map(action => (\n                  <option key={action} value={action}>{action}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Permissions by Resource */}\n      {isLoading ? (\n        <Card>\n          <CardContent className=\"flex items-center justify-center h-32\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-6\">\n          {Object.entries(groupedPermissions).map(([resource, resourcePermissions]) => {\n            const ResourceIcon = resourceIcons[resource] || Key\n            \n            return (\n              <Card key={resource}>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <ResourceIcon className=\"h-5 w-5\" />\n                    {resource}\n                    <Badge variant=\"outline\" className=\"ml-auto\">\n                      {resourcePermissions.length} permissions\n                    </Badge>\n                  </CardTitle>\n                  <CardDescription>\n                    Permissions for {resource.toLowerCase()} management\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Permission</TableHead>\n                        <TableHead>Action</TableHead>\n                        <TableHead>Description</TableHead>\n                        <TableHead>Permission ID</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {resourcePermissions.map((permission) => (\n                        <TableRow key={permission.permissionId}>\n                          <TableCell>\n                            <div className=\"font-medium\">{permission.name}</div>\n                          </TableCell>\n                          <TableCell>\n                            <Badge \n                              className={`${actionColors[permission.action] || 'bg-gray-100 text-gray-800'}`}\n                            >\n                              {permission.action}\n                            </Badge>\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"max-w-md text-sm text-gray-600\">\n                              {permission.description || 'No description available'}\n                            </div>\n                          </TableCell>\n                          <TableCell>\n                            <code className=\"text-xs bg-gray-100 px-2 py-1 rounded\">\n                              {permission.permissionId.slice(0, 8)}...\n                            </code>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </CardContent>\n              </Card>\n            )\n          })}\n        </div>\n      )}\n\n      {/* Summary */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Permission Summary</CardTitle>\n          <CardDescription>\n            Overview of permissions by action type\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {actions.map(action => {\n              const count = permissions.filter(p => p.action === action).length\n              return (\n                <div key={action} className=\"text-center p-4 border rounded-lg\">\n                  <div className=\"text-2xl font-bold text-gray-900\">{count}</div>\n                  <div className=\"text-sm text-gray-600\">{action} Permissions</div>\n                </div>\n              )\n            })}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nexport default PermissionManagement\n"],"names":["resourceIcons","Users","Shield","Key","BarChart3","FileText","Database","Settings","actionColors","PermissionManagement","search","setSearch","useState","resourceFilter","setResourceFilter","actionFilter","setActionFilter","permissions","isLoading","error","useQuery","userManagementApi","filteredPermissions","permission","matchesSearch","_a","matchesResource","matchesAction","resources","p","actions","groupedPermissions","groups","resource","jsxs","jsx","Card","CardHeader","CardTitle","CardContent","Search","Input","e","action","resourcePermissions","ResourceIcon","Badge","CardDescription","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","count"],"mappings":"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"}