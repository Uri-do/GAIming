{"version":3,"file":"Recommendations-CU0rfWTu.js","sources":["../../src/pages/Recommendations.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { apiService } from '@/services/api'\nimport { GameRecommendation } from '@/types'\n\nconst Recommendations: React.FC = () => {\n  const [recommendations, setRecommendations] = useState<GameRecommendation[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [selectedPlayerId, setSelectedPlayerId] = useState<number>(1)\n\n  const fetchRecommendations = async (playerId: number) => {\n    try {\n      setLoading(true)\n      setError(null)\n\n      console.log(`Fetching recommendations for player ${playerId}...`)\n      const response = await apiService.get<GameRecommendation[]>(`/recommendations/player/${playerId}`)\n\n      console.log('Recommendations response:', response)\n\n      // Handle nested response structure\n      const data = Array.isArray(response) ? response : (response as any)?.data || []\n      const recommendations = Array.isArray(data) ? data : []\n\n      setRecommendations(recommendations)\n    } catch (err) {\n      console.error('Error fetching recommendations:', err)\n      setError(err instanceof Error ? err.message : 'Failed to fetch recommendations')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchRecommendations(selectedPlayerId)\n  }, [selectedPlayerId])\n\n  const handlePlayerChange = (playerId: number) => {\n    setSelectedPlayerId(playerId)\n  }\n\n  const handleRecordClick = async (recommendationId: number) => {\n    try {\n      await apiService.post(`/recommendations/${recommendationId}/click`)\n      console.log(`Recorded click for recommendation ${recommendationId}`)\n      // Update the recommendation in the list\n      setRecommendations(prev =>\n        prev.map(rec =>\n          rec.id === recommendationId\n            ? { ...rec, isClicked: true, clickedAt: new Date().toISOString() }\n            : rec\n        )\n      )\n    } catch (err) {\n      console.error('Error recording click:', err)\n    }\n  }\n\n  const handleRecordPlay = async (recommendationId: number) => {\n    try {\n      await apiService.post(`/recommendations/${recommendationId}/play`)\n      console.log(`Recorded play for recommendation ${recommendationId}`)\n      // Update the recommendation in the list\n      setRecommendations(prev =>\n        prev.map(rec =>\n          rec.id === recommendationId\n            ? { ...rec, isPlayed: true, playedAt: new Date().toISOString() }\n            : rec\n        )\n      )\n    } catch (err) {\n      console.error('Error recording play:', err)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Recommendations</h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">Monitor and manage AI-powered game recommendations</p>\n        </div>\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-2\">Loading recommendations...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Recommendations</h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">Monitor and manage AI-powered game recommendations</p>\n        </div>\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\n          <h3 className=\"text-lg font-medium text-red-800 dark:text-red-200 mb-2\">Error Loading Recommendations</h3>\n          <p className=\"text-red-600 dark:text-red-400\">{error}</p>\n          <button\n            onClick={() => fetchRecommendations(selectedPlayerId)}\n            className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n          >\n            Retry\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Recommendations</h1>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n          Monitor and manage AI-powered game recommendations ({recommendations.length} recommendations)\n        </p>\n      </div>\n\n      {/* Player Selection */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4\">\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n          Select Player:\n        </label>\n        <select\n          value={selectedPlayerId}\n          onChange={(e) => handlePlayerChange(Number(e.target.value))}\n          className=\"block w-48 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n        >\n          <option value={1}>Player 1</option>\n          <option value={2}>Player 2</option>\n          <option value={3}>Player 3</option>\n          <option value={4}>Player 4</option>\n          <option value={5}>Player 5</option>\n        </select>\n      </div>\n\n      {/* Recommendations List */}\n      <div className=\"space-y-4\">\n        {recommendations && recommendations.length > 0 ? recommendations.map((recommendation) => (\n          <div key={recommendation.id} className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center space-x-3 mb-3\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                    {recommendation.game?.gameName || `Game ${recommendation.gameId}`}\n                  </h3>\n                  <span className=\"px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full text-sm font-medium\">\n                    Score: {(recommendation.score * 100).toFixed(1)}%\n                  </span>\n                  <span className=\"px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 rounded-full text-sm\">\n                    {recommendation.algorithm}\n                  </span>\n                </div>\n\n                <p className=\"text-gray-600 dark:text-gray-400 mb-3\">\n                  {recommendation.reason}\n                </p>\n\n                <div className=\"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400\">\n                  <span>Position: {recommendation.position}</span>\n                  <span>Category: {recommendation.category}</span>\n                  <span>Context: {recommendation.context}</span>\n                  <span>Generated: {new Date(recommendation.generatedDate).toLocaleDateString()}</span>\n                </div>\n\n                <div className=\"flex items-center space-x-4 mt-3\">\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    recommendation.isClicked\n                      ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400'\n                      : 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400'\n                  }`}>\n                    {recommendation.isClicked ? 'Clicked' : 'Not Clicked'}\n                  </span>\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    recommendation.isPlayed\n                      ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400'\n                      : 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400'\n                  }`}>\n                    {recommendation.isPlayed ? 'Played' : 'Not Played'}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"flex flex-col space-y-2 ml-4\">\n                <button\n                  onClick={() => handleRecordClick(recommendation.id)}\n                  disabled={recommendation.isClicked}\n                  className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  Record Click\n                </button>\n                <button\n                  onClick={() => handleRecordPlay(recommendation.id)}\n                  disabled={recommendation.isPlayed}\n                  className=\"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  Record Play\n                </button>\n              </div>\n            </div>\n          </div>\n        )) : (\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center\">\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              No Recommendations Found\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              No recommendations available for Player {selectedPlayerId}.\n            </p>\n          </div>\n        )}\n      </div>\n\n\n    </div>\n  )\n}\n\nexport default Recommendations\n"],"names":["Recommendations","recommendations","setRecommendations","useState","loading","setLoading","error","setError","selectedPlayerId","setSelectedPlayerId","fetchRecommendations","playerId","response","apiService","data","err","useEffect","handlePlayerChange","handleRecordClick","recommendationId","prev","rec","handleRecordPlay","jsxs","jsx","e","recommendation","_a"],"mappings":"qFAIA,MAAMA,EAA4B,IAAM,CACtC,KAAM,CAACC,EAAiBC,CAAkB,EAAIC,EAAAA,SAA+B,CAAA,CAAE,EACzE,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAChD,CAACK,EAAkBC,CAAmB,EAAIN,EAAAA,SAAiB,CAAC,EAE5DO,EAAuB,MAAOC,GAAqB,CACnD,GAAA,CACFN,EAAW,EAAI,EACfE,EAAS,IAAI,EAEL,QAAA,IAAI,uCAAuCI,CAAQ,KAAK,EAChE,MAAMC,EAAW,MAAMC,EAAW,IAA0B,2BAA2BF,CAAQ,EAAE,EAEzF,QAAA,IAAI,4BAA6BC,CAAQ,EAG3C,MAAAE,EAAO,MAAM,QAAQF,CAAQ,EAAIA,GAAYA,GAAA,YAAAA,EAAkB,OAAQ,CAAC,EACxEX,EAAkB,MAAM,QAAQa,CAAI,EAAIA,EAAO,CAAC,EAEtDZ,EAAmBD,CAAe,QAC3Bc,EAAK,CACJ,QAAA,MAAM,kCAAmCA,CAAG,EACpDR,EAASQ,aAAe,MAAQA,EAAI,QAAU,iCAAiC,CAAA,QAC/E,CACAV,EAAW,EAAK,CAAA,CAEpB,EAEAW,EAAAA,UAAU,IAAM,CACdN,EAAqBF,CAAgB,CAAA,EACpC,CAACA,CAAgB,CAAC,EAEf,MAAAS,EAAsBN,GAAqB,CAC/CF,EAAoBE,CAAQ,CAC9B,EAEMO,EAAoB,MAAOC,GAA6B,CACxD,GAAA,CACF,MAAMN,EAAW,KAAK,oBAAoBM,CAAgB,QAAQ,EAC1D,QAAA,IAAI,qCAAqCA,CAAgB,EAAE,EAEnEjB,KACEkB,EAAK,IACHC,GAAAA,EAAI,KAAOF,EACP,CAAE,GAAGE,EAAK,UAAW,GAAM,UAAe,IAAA,KAAA,EAAO,eACjDA,CAAA,CAER,QACON,EAAK,CACJ,QAAA,MAAM,yBAA0BA,CAAG,CAAA,CAE/C,EAEMO,EAAmB,MAAOH,GAA6B,CACvD,GAAA,CACF,MAAMN,EAAW,KAAK,oBAAoBM,CAAgB,OAAO,EACzD,QAAA,IAAI,oCAAoCA,CAAgB,EAAE,EAElEjB,KACEkB,EAAK,IACHC,GAAAA,EAAI,KAAOF,EACP,CAAE,GAAGE,EAAK,SAAU,GAAM,SAAc,IAAA,KAAA,EAAO,eAC/CA,CAAA,CAER,QACON,EAAK,CACJ,QAAA,MAAM,wBAAyBA,CAAG,CAAA,CAE9C,EAEA,OAAIX,EAEAmB,EAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,mDAAmD,SAAe,kBAAA,EAC/EA,EAAA,IAAA,IAAA,CAAE,UAAU,wCAAwC,SAAkD,oDAAA,CAAA,CAAA,EACzG,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,mGACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,sEAAuE,CAAA,EACrFA,EAAA,IAAA,IAAA,CAAE,UAAU,wCAAwC,SAA0B,4BAAA,CAAA,CAAA,CACjF,CAAA,CAAA,EACF,EAIAlB,EAEAiB,EAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,mDAAmD,SAAe,kBAAA,EAC/EA,EAAA,IAAA,IAAA,CAAE,UAAU,wCAAwC,SAAkD,oDAAA,CAAA,CAAA,EACzG,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,wFACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,0DAA0D,SAA6B,gCAAA,EACpGA,EAAA,IAAA,IAAA,CAAE,UAAU,iCAAkC,SAAMlB,EAAA,EACrDkB,EAAA,IAAC,SAAA,CACC,QAAS,IAAMd,EAAqBF,CAAgB,EACpD,UAAU,qFACX,SAAA,OAAA,CAAA,CAED,CACF,CAAA,CAAA,EACF,EAKFe,EAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,mDAAmD,SAAe,kBAAA,EAChFD,EAAAA,KAAC,IAAE,CAAA,UAAU,wCAAwC,SAAA,CAAA,uDACEtB,EAAgB,OAAO,mBAAA,CAC9E,CAAA,CAAA,EACF,EAGAsB,EAAAA,KAAC,MAAI,CAAA,UAAU,uFACb,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,kEAAkE,SAEnF,iBAAA,EACAD,EAAA,KAAC,SAAA,CACC,MAAOf,EACP,SAAWiB,GAAMR,EAAmB,OAAOQ,EAAE,OAAO,KAAK,CAAC,EAC1D,UAAU,6MAEV,SAAA,CAACD,EAAA,IAAA,SAAA,CAAO,MAAO,EAAG,SAAQ,WAAA,EACzBA,EAAA,IAAA,SAAA,CAAO,MAAO,EAAG,SAAQ,WAAA,EACzBA,EAAA,IAAA,SAAA,CAAO,MAAO,EAAG,SAAQ,WAAA,EACzBA,EAAA,IAAA,SAAA,CAAO,MAAO,EAAG,SAAQ,WAAA,EACzBA,EAAA,IAAA,SAAA,CAAO,MAAO,EAAG,SAAQ,UAAA,CAAA,CAAA,CAAA,CAAA,CAC5B,EACF,QAGC,MAAI,CAAA,UAAU,YACZ,SAAmBvB,GAAAA,EAAgB,OAAS,EAAIA,EAAgB,IAAKyB,GAAA,oBACnE,MAA4B,CAAA,UAAU,uFACrC,SAACH,EAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAG,UAAU,sDACX,WAAAG,EAAAD,EAAe,OAAf,YAAAC,EAAqB,WAAY,QAAQD,EAAe,MAAM,EACjE,CAAA,EACAH,EAAAA,KAAC,OAAK,CAAA,UAAU,8GAA8G,SAAA,CAAA,WACnHG,EAAe,MAAQ,KAAK,QAAQ,CAAC,EAAE,GAAA,EAClD,EACCF,EAAA,IAAA,OAAA,CAAK,UAAU,0GACb,WAAe,SAClB,CAAA,CAAA,EACF,EAECA,EAAA,IAAA,IAAA,CAAE,UAAU,wCACV,WAAe,OAClB,EAEAD,EAAAA,KAAC,MAAI,CAAA,UAAU,uEACb,SAAA,CAAAA,OAAC,OAAK,CAAA,SAAA,CAAA,aAAWG,EAAe,QAAA,EAAS,SACxC,OAAK,CAAA,SAAA,CAAA,aAAWA,EAAe,QAAA,EAAS,SACxC,OAAK,CAAA,SAAA,CAAA,YAAUA,EAAe,OAAA,EAAQ,SACtC,OAAK,CAAA,SAAA,CAAA,cAAY,IAAI,KAAKA,EAAe,aAAa,EAAE,mBAAmB,CAAA,CAAE,CAAA,CAAA,EAChF,EAEAH,EAAAA,KAAC,MAAI,CAAA,UAAU,mCACb,SAAA,CAACC,EAAA,IAAA,OAAA,CAAK,UAAW,8CACfE,EAAe,UACX,uEACA,kEACN,GACG,SAAAA,EAAe,UAAY,UAAY,cAC1C,EACCF,EAAA,IAAA,OAAA,CAAK,UAAW,8CACfE,EAAe,SACX,uEACA,kEACN,GACG,SAAAA,EAAe,SAAW,SAAW,YACxC,CAAA,CAAA,CACF,CAAA,CAAA,EACF,EAEAH,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,QAAS,IAAMN,EAAkBQ,EAAe,EAAE,EAClD,SAAUA,EAAe,UACzB,UAAU,uIACX,SAAA,cAAA,CAED,EACAF,EAAA,IAAC,SAAA,CACC,QAAS,IAAMF,EAAiBI,EAAe,EAAE,EACjD,SAAUA,EAAe,SACzB,UAAU,yIACX,SAAA,aAAA,CAAA,CAED,CACF,CAAA,CACF,CAAA,CAAA,CAAA,EA5DQA,EAAe,EA6DzB,EACD,EACEH,OAAA,MAAA,CAAI,UAAU,mGACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,yDAAyD,SAEvE,2BAAA,EACAD,EAAAA,KAAC,IAAE,CAAA,UAAU,mCAAmC,SAAA,CAAA,2CACLf,EAAiB,GAAA,CAC5D,CAAA,CAAA,CAAA,CACF,CAEJ,CAAA,CAAA,EAGF,CAEJ"}