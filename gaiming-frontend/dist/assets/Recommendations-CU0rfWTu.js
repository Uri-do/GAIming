import{r as d,j as e}from"./index-B51ItZ5h.js";import{a as n}from"./api-DLjschmT.js";const N=()=>{const[l,o]=d.useState([]),[m,c]=d.useState(!0),[i,x]=d.useState(null),[s,y]=d.useState(1),g=async r=>{try{c(!0),x(null),console.log(`Fetching recommendations for player ${r}...`);const a=await n.get(`/recommendations/player/${r}`);console.log("Recommendations response:",a);const t=Array.isArray(a)?a:(a==null?void 0:a.data)||[],u=Array.isArray(t)?t:[];o(u)}catch(a){console.error("Error fetching recommendations:",a),x(a instanceof Error?a.message:"Failed to fetch recommendations")}finally{c(!1)}};d.useEffect(()=>{g(s)},[s]);const h=r=>{y(r)},b=async r=>{try{await n.post(`/recommendations/${r}/click`),console.log(`Recorded click for recommendation ${r}`),o(a=>a.map(t=>t.id===r?{...t,isClicked:!0,clickedAt:new Date().toISOString()}:t))}catch(a){console.error("Error recording click:",a)}},p=async r=>{try{await n.post(`/recommendations/${r}/play`),console.log(`Recorded play for recommendation ${r}`),o(a=>a.map(t=>t.id===r?{...t,isPlayed:!0,playedAt:new Date().toISOString()}:t))}catch(a){console.error("Error recording play:",a)}};return m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Recommendations"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor and manage AI-powered game recommendations"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Loading recommendations..."})]})]}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Recommendations"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor and manage AI-powered game recommendations"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-red-800 dark:text-red-200 mb-2",children:"Error Loading Recommendations"}),e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i}),e.jsx("button",{onClick:()=>g(s),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Recommendations"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Monitor and manage AI-powered game recommendations (",l.length," recommendations)"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Player:"}),e.jsxs("select",{value:s,onChange:r=>h(Number(r.target.value)),className:"block w-48 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:1,children:"Player 1"}),e.jsx("option",{value:2,children:"Player 2"}),e.jsx("option",{value:3,children:"Player 3"}),e.jsx("option",{value:4,children:"Player 4"}),e.jsx("option",{value:5,children:"Player 5"})]})]}),e.jsx("div",{className:"space-y-4",children:l&&l.length>0?l.map(r=>{var a;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((a=r.game)==null?void 0:a.gameName)||`Game ${r.gameId}`}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full text-sm font-medium",children:["Score: ",(r.score*100).toFixed(1),"%"]}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 rounded-full text-sm",children:r.algorithm})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:r.reason}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Position: ",r.position]}),e.jsxs("span",{children:["Category: ",r.category]}),e.jsxs("span",{children:["Context: ",r.context]}),e.jsxs("span",{children:["Generated: ",new Date(r.generatedDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.isClicked?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:r.isClicked?"Clicked":"Not Clicked"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.isPlayed?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:r.isPlayed?"Played":"Not Played"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[e.jsx("button",{onClick:()=>b(r.id),disabled:r.isClicked,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Record Click"}),e.jsx("button",{onClick:()=>p(r.id),disabled:r.isPlayed,className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Record Play"})]})]})},r.id)}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Recommendations Found"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["No recommendations available for Player ",s,"."]})]})})]})};export{N as default};
//# sourceMappingURL=Recommendations-CU0rfWTu.js.map
